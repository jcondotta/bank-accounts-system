package com.jcondotta.bankaccounts.domain.value_objects.address;

import static com.jcondotta.bankaccounts.domain.validation.DomainPreconditions.required;

public record Address(
  Street street,
  StreetNumber streetNumber,
  AddressComplement complement,
  PostalCode postalCode,
  City city
) {

  public static final String STREET_MUST_BE_PROVIDED = "Street must be provided";
  public static final String NUMBER_MUST_BE_PROVIDED = "Street number must be provided";
  public static final String POSTAL_MUST_BE_PROVIDED = "Postal code must be provided";
  public static final String CITY_MUST_BE_PROVIDED = "City must be provided";

  public Address {
    required(street, STREET_MUST_BE_PROVIDED);
    required(streetNumber, NUMBER_MUST_BE_PROVIDED);
    required(postalCode, POSTAL_MUST_BE_PROVIDED);
    required(city, CITY_MUST_BE_PROVIDED);
  }

  public static Address of(String street, String number, String complement, String postalCode, String city) {
    return new Address(
      Street.of(street),
      StreetNumber.of(number),
      complement == null ? null : AddressComplement.of(complement),
      PostalCode.of(postalCode),
      City.of(city)
    );
  }
}